



js是单线程的，意思是js引擎中只有一个线程用于执行js代码，称为主线程。但在js引擎或浏览器，以及node中还有其它的线程，如计时线程，网络请求线程等。通过主线程和其它线程结合执行异步任务。

1. 执行程序遇到同步任务，进入主线程执行。**任务完成后**才能继续执行下一个任务
2. 执行程序遇到异步任务，**程序立即**继续执行下一个任务。而异步任务进入EventTable事件表通过其它线程处理事件，事件处理完成后自动压入EventQueue事件队列等待执行。
3. 后面每一个任务都是如此反复，程序中所有的同步任务执行完毕后，从EventQueue中取出异步任务执行

如：

```javascript
console.log("start");                        //打印start
setTimeout(function(){
    console.log("timeout");                  //5秒后打印timeout
},5000);
for(let i = 0;i <= 500000;i++){             //打印i=i 500000次，约等于14秒
    console.log("i:",i);
}
console.log("end");                          //打印end
```

进入程序，打印start为同步任务，压入**主线程**立即执行；定时函数是异步任务，压入EventTable通过**计数线程**定时，程序继续执行；循环打印是同步任务立即执行；打印end是同步任务立即执行。此时主线程空闲，循环打印用时14s，而计数线程在第5s时完成计时压入EventQueue等待。在主线程空闲后立即执行。

```javascript
start
i:1 
(...) //一直输出到500000
//耗时14秒左右
end
//没有等待
timeout
```





那什么是同步任务，什么是异步任务？

同步任务大都是那些我们希望必须执行完此任务才能继续向下执行的任务。

异步任务大都是那些我们希望**不是必须**执行完此任务才能继续向下执行的任务。





异步任务主要有以下三种类型：

1. 普通事件（"click"等）
2. 资源加载（"load"等）
3. 定时器